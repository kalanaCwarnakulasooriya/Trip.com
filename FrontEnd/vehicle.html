<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vehicals - Trip.com</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="css/darkIndex.css">
    <link rel="stylesheet" href="css/vehicle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/scrollreveal"></script>
</head>
<body>
<!-- Preloader -->
<div class="preloader">
    <div class="preloader-spinner"></div>
</div>
<!-- Header -->
<header class="header">
    <div class="container">
        <div class="header-inner">
            <div class="logo">
                <a href="home.html" class="logo-link">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                    </svg>
                    <span class="logo-text">Trip</span> <span class="logo-sub">.com</span>
                </a>
            </div>
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="destination.html">Destinations</a></li>
                    <li><a href="guides.html">Guides</a></li>
                    <li><a href="universities.html">Universities</a></li>
                    <li><a href="vehicle.html" class="active">Vehicle Rentals</a></li>
                    <li><a href="feedBack.html">FeedBack</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <!--        <button class="btn btn-outline" onclick="window.location.href= 'login.html'">Book Now</button>-->
                <button class="btn-logout" onclick="logout()">Logout</button>
                <button class="menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-background"></div>
    <div class="overlay"></div>
    <div class="container">
        <div class="page-header-content">
            <h1 class="page-title split-text">Vehicles</h1>
            <div class="breadcrumbs">
                <a href="home.html" class="breadcrumb-item">Home</a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-item active">Vehicle</span>
            </div>
        </div>
    </div>
</section>

<!-- Featured Vehicles Section -->
<section class="featured-vehicles-section section-padding">
    <div class="container">

        <div class="featured-vehicles-slider" data-aos="fade-up" data-aos-delay="100">
            <div class="featured-vehicles-container">
                <!--Vehicles will load here dynamically-->
            </div>

            <div class="slider-controls">
                <button class="prev" aria-label="Previous slide">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <div class="dots">
                    <button class="dot active" aria-label="Go to slide 1"></button>
                    <button class="dot" aria-label="Go to slide 2"></button>
                    <button class="dot" aria-label="Go to slide 3"></button>
                </div>
                <button class="next" aria-label="Next slide">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Vehicle Categories Section -->
<section class="vehicle-categories-section section-padding bg-light">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">Browse by Category</h2>
            <p class="section-subtitle">Find the perfect vehicle for your needs</p>
        </div>

        <div class="categories-grid" data-aos="fade-up" data-aos-delay="100">
<!--            Vehicles categories will load here dynamically-->
        </div>
    </div>
</section>

<!-- All Vehicles Section -->
<section id="all-vehicles" class="all-vehicles-section section-padding">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title-white">Our Complete Fleet</h2>
            <p class="section-subtitle">Browse all available vehicles for your next trip</p>
        </div>

        <div class="filters-container" data-aos="fade-up" data-aos-delay="100">
            <div class="filter-group">
                <label for="category-filter">Category</label>
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="economy">Economy</option>
                    <option value="compact">Compact</option>
                    <option value="suv">SUV</option>
                    <option value="luxury">Luxury</option>
                    <option value="convertible">Convertible</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="price-filter">Price Range</label>
                <select id="price-filter">
                    <option value="all">All Prices</option>
                    <option value="budget">Budget ($0-$50)</option>
                    <option value="mid">Mid-Range ($51-$100)</option>
                    <option value="premium">Premium ($101+)</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="passengers-filter">Passengers</label>
                <select id="passengers-filter">
                    <option value="all">Any</option>
                    <option value="2">2 Seats</option>
                    <option value="4">4 Seats</option>
                    <option value="5">5 Seats</option>
                    <option value="7+">7+ Seats</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="sort-filter">Sort By</label>
                <select id="sort-filter">
                    <option value="recommended">Recommended</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="rating">Highest Rated</option>
                </select>
            </div>
        </div>

        <div class="vehicles-grid" data-aos="fade-up" data-aos-delay="200">
<!--            loading database-->
        </div>

        <div class="load-more-container" data-aos="fade-up" data-aos-delay="300">
            <button class="btn btn-outline btn-load-more">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1 4 1 10 7 10"></polyline>
                    <polyline points="23 20 23 14 17 14"></polyline>
                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                </svg>
                Load More Vehicles
            </button>
        </div>
    </div>
</section>

<!-- Rental Process Section -->
<section class="rental-process-section section-padding bg-light">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">How It Works</h2>
            <p class="section-subtitle">Renting a vehicle with us is quick and easy</p>
        </div>

        <div class="process-steps" id="processSteps" data-aos="fade-up" data-aos-delay="100">
            <!--<div class="process-step">
                <div class="step-number">1</div>
                <div class="step-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
                <h3 class="step-title">Choose Your Vehicle</h3>
                <p class="step-description">Browse our wide selection of vehicles and choose the one that fits your needs.</p>
            </div>

            <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                </div>
                <h3 class="step-title">Select Dates</h3>
                <p class="step-description">Choose your pickup and drop-off dates and times that work for you.</p>
            </div>

            <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <h3 class="step-title">Provide Details</h3>
                <p class="step-description">Fill in your personal information and driver's license details.</p>
            </div>

            <div class="process-step">
                <div class="step-number">4</div>
                <div class="step-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                </div>
                <h3 class="step-title">Confirm & Pay</h3>
                <p class="step-description">Review your booking details and complete the payment securely.</p>
            </div>

            <div class="process-step">
                <div class="step-number">5</div>
                <div class="step-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.5 2.8C1.4 11.3 1 12.1 1 13v3c0 .6.4 1 1 1h2"></path>
                        <circle cx="7" cy="17" r="2"></circle>
                        <circle cx="17" cy="17" r="2"></circle>
                    </svg>
                </div>
                <h3 class="step-title">Enjoy Your Ride</h3>
                <p class="step-description">Pick up your vehicle and enjoy your journey with peace of mind.</p>
            </div>-->
        </div>
    </div>
</section>

<!-- Reviews Section -->

<!-- FAQ Section -->

<!-- CTA Section -->
<section class="cta-section section-padding">
    <div class="container">
        <div class="cta-container" data-aos="fade-up">
            <div class="cta-content">
                <h2 class="cta-title">Ready to Hit the Road?</h2>
                <p class="cta-text">Book your perfect vehicle today and enjoy the freedom to explore at your own pace.</p>
                <div class="cta-buttons">
                    <a href="#" class="btn btn-primary">Book Now</a>
                    <a href="#" class="btn btn-outline">Contact Us</a>
                </div>
            </div>
            <div class="cta-image">
                <img src="https://www.tobin.ie/wp-content/uploads/2023/06/road-maintenance-in-ireland-john-oflaherty-1024x576.png?height=300&width=400" alt="Happy travelers with rental car">
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <div class="footer-logo">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                    </svg>
                    <span class="logo-text">Trip</span> <span class="logo-sub">.com</span>
                </div>
                <p class="footer-description">Creating unforgettable travel experiences since 2010. Your journey begins with us.</p>
                <div class="footer-social">
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="24" height="24" viewBox="0 0 24 24"
                             fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </a>
                </div>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#destinations">Home</a></li>
                    <li><a href="home.html#packages">Packages</a></li>
                    <li><a href="home.html#testimonials">Travelers</a></li>
                    <li><a href="home.html#gallery">Gallery</a></li>
                    <li><a href="home.html#contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Support</h3>
                <ul class="footer-links">
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Booking Information</a></li>
                    <li><a href="#">Cancellation Policy</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Newsletter</h3>
                <p class="footer-newsletter-text">Subscribe to our newsletter for travel tips and exclusive offers</p>
                <div class="footer-newsletter">
                    <input type="email" placeholder="Enter your email">
                    <button class="btn btn-primary">Subscribe</button>
                </div>
                <p class="footer-newsletter-disclaimer">By subscribing, you agree to our Privacy Policy</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p class="copyright">© <span id="currentYear"></span> Wanderlust Travel. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Back to Top Button -->
<button class="back-to-top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
</button>

<!-- Scripts -->
<script src="js/index.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Load Vehicle
        const VEHICLE_API_URL = "http://localhost:8080/api/vehicles";
        const vehicleGrid = document.querySelector(".featured-vehicles-container");
        const dotsContainer = document.querySelector(".dots");

        async function loadVehicles() {
            if (!vehicleGrid) return;
            try {
                const response = await fetch(VEHICLE_API_URL);
                const data = await response.json();

                if (response.ok && data.data) {
                    renderVehicles(data.data);
                } else {
                    console.warn("No vehicle found");
                }
            } catch (error) {
                console.error("Error loading vehicles:", error);
            }
        }

        // ⭐ Generate stars
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            let starsHtml = "";

            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    starsHtml += `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                    </svg>`;
                } else if (i === fullStars && halfStar) {
                    starsHtml += `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img" aria-label="Half star"
                                     width="24" height="24">
                                  <defs>
                                    <clipPath id="clip-left-half">
                                      <rect x="0" y="0" width="12" height="24" />
                                    </clipPath>
                                  </defs>
                                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                                           fill="currentColor" clip-path="url(#clip-left-half)" />
                                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                                           fill="none" stroke="currentColor" stroke-width="1" stroke-linejoin="round" />
                                </svg>
                                       `;
                } else {
                    starsHtml += `<svg xmlns="http://www.w3.org/2000/svg"
                                     viewBox="0 0 24 24"
                                     width="24" height="24"
                                     role="img" aria-label="Outline star">
                                  <polygon
                                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                    stroke-linejoin="round"
                                    stroke-linecap="round"/>
                                </svg>
                                `;
                }
            }
            return starsHtml;
        }

        // ⭐ Render vehicles dynamically
        function renderVehicles(vehicles) {
            vehicleGrid.innerHTML = "";
            dotsContainer.innerHTML = "";

            vehicles.forEach((vehicle, index) => {
                const featuresHtml = (vehicle.features || []).map(f => `
                    <div class="feature">
                        <span>
                            <i class="fa ${f.icon}"></i> ${f.name}
                        </span>
                    </div>
                `).join("");

                const vehicleHtml = `
                    <div class="featured-vehicle" data-id="${vehicle.id}">
                        <div class="vehicle-image">
                            <img src="${vehicle.imageUrl || 'images/default-car.jpg'}" alt="${vehicle.name || 'Vehicle'}">
                            ${vehicle.badge ? `<div class="vehicle-badge">${vehicle.badge}</div>` : ""}
                        </div>
                        <div class="vehicle-details">
                            <div class="vehicle-header">
                                <h3 class="vehicle-name">${vehicle.name || "Unknown Vehicle"}</h3>
                                <div class="vehicle-rating">
                                    <div class="stars">
                                        ${generateStars(vehicle.rating || 0)}
                                    </div>
                                    <span class="rating-count">${vehicle.rating || 0} (${vehicle.reviewCount || 0} reviews)</span>
                                </div>
                            </div>
                            <div class="vehicle-features">
                                ${featuresHtml}
                            </div>
                            <div class="vehicle-price">
                                <div class="price">
                                    <span class="amount">$${vehicle.pricePerDay || 0}</span>
                                    <span class="period">/ ${vehicle.pricePeriod || "day"}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                vehicleGrid.insertAdjacentHTML("beforeend", vehicleHtml);

                // Add dot for slider
                dotsContainer.insertAdjacentHTML("beforeend", `
                    <button class="dot ${index === 0 ? "active" : ""}" aria-label="Go to slide ${index + 1}"></button>
                `);
            });
        }

        // ===== Vehicle Categories =====
        const CATEGORY_API_URL = "http://localhost:8080/api/vehicleCategories";
        const categoriesGrid = document.querySelector(".categories-grid");

        async function loadCategories(){
            if(!categoriesGrid) return;
            try{
                const res = await fetch(CATEGORY_API_URL);
                const result = await res.json();
                if(res.ok && result.data){
                    renderCategories(result.data);
                } else {
                    console.warn("No categories found");
                }
            } catch(err){
                console.error("Error loading categories:", err);
            }
        }

        function renderCategories(categories){
            categoriesGrid.innerHTML = "";
            categories.forEach(cat=>{
                const html = `
                <div class="category-card ${cat.name.toLowerCase()}">
                    <h3 class="category-name">${cat.name}</h3>
                    <p class="category-description">${cat.description || ''}</p>
                    <div class="category-stats">
                        <div class="stat">
                            <span class="value">$${cat.pricePerDay || 0}+</span>
                            <span class="label">per day</span>
                        </div>
                        <div class="stat">
                            <span class="value">${cat.availableVehicles || 0}</span>
                            <span class="label">vehicles</span>
                        </div>
                    </div>
                    <a href="#" class="btn btn-outline">View All</a>
                </div>
            `;
                categoriesGrid.insertAdjacentHTML("beforeend", html);
            });
        }


        // ===== Vehicle Fleet =====
        const vehiclesGrid = document.querySelector(".vehicles-grid");
        const apiUrl = "http://localhost:8080/api/vehicleFleets";

        // Fetch all fleets
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                if(data && data.data) {
                    const fleets = data.data;
                    vehiclesGrid.innerHTML = "";

                    fleets.forEach(fleet => {
                        const vehicleCard = document.createElement("div");
                        vehicleCard.classList.add("vehicle-card");

                        vehicleCard.innerHTML = `
                        <div class="vehicle-image">
                            <img src="${fleet.imageUrl}" alt="${fleet.name}">
                        </div>
                        <div class="vehicle-details">
                            <h3 class="vehicle-name">${fleet.name}</h3>
                            <div class="vehicle-category">${fleet.category}</div>
                            <div class="vehicle-features">
                                <div class="feature"><span>${fleet.seats} Seats</span></div>
                                <div class="feature"><span>${fleet.bags} Bags</span></div>
                                <div class="feature"><span>${fleet.transmission}</span></div>
                            </div>
                            <div class="vehicle-price">
                                <span class="amount">Rs.${fleet.pricePerDay}</span>
                                <span class="period">/ day</span>
                            </div>
                            <a href="#" class="btn btn-primary btn-sm">Book Now</a>
                        </div>
                    `;
                        vehiclesGrid.appendChild(vehicleCard);
                    });
                }
            })
            .catch(error => {
                console.error("Error fetching fleets:", error);
                vehiclesGrid.innerHTML = "<p>Failed to load vehicles. Please try again later.</p>";
            });


        // ===== Rental Process Steps =====
        const RENTAL_API_URL = "http://localhost:8080/api/rentalProcessSteps";
        const processStepsContainer = document.getElementById("processSteps");

        async function loadRentalSteps() {
            if (!processStepsContainer) return;
            try {
                const res = await fetch(RENTAL_API_URL);
                const result = await res.json();
                if (res.ok && result.data) {
                    renderRentalSteps(result.data);
                } else {
                    processStepsContainer.innerHTML = "<p>No steps available.</p>";
                }
            } catch (err) {
                console.error("Error loading rental steps:", err);
                processStepsContainer.innerHTML = "<p>Failed to load steps.</p>";
            }
        }

        function renderRentalSteps(steps) {
            processStepsContainer.innerHTML = "";
            steps.forEach(step => {
                const stepHtml = `
            <div class="process-step">
                <div class="step-number">${step.stepNumber}</div>
                <div class="step-icon">${step.iconSvg}</div>
                <h3 class="step-title">${step.title}</h3>
                <p class="step-description">${step.description}</p>
            </div>
        `;
                processStepsContainer.insertAdjacentHTML("beforeend", stepHtml);
            });
        }



        loadVehicles();
        loadCategories();
        loadRentalSteps();

        // ===== Auth check =====
        const token = getCookie("token");
        if (!token) {
            setTimeout(() => window.location.href = "login.html", 1500);
        }
    });

    // ===== Cookie Helpers =====
    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i].trim();
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function deleteCookie(name) {
        document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax;";
    }

    function logout() {
        deleteCookie("token");
        deleteCookie("username");
        setTimeout(() => window.location.href = "index.html", 1500);
    }
</script>
</body>
</html>