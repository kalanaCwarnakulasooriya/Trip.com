<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Guides - Trip.com</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="css/darkIndex.css">
    <link rel="stylesheet" href="css/guides.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-yH4e9A1zq7eH1l3Eih4WqF5gGgE1p1B8wqTn5sKkU1kF0nQ7xYQfN6qYrE+vRJXh+mJ2v8bFRe1N6Qy+8qwR5Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/scrollreveal"></script>
</head>
<body>
<!-- Preloader -->
<div class="preloader">
    <div class="preloader-spinner"></div>
</div>
<!-- Header -->
<header class="header">
    <div class="container">
        <div class="header-inner">
            <div class="logo">
                <a href="home.html" class="logo-link">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                    </svg>
                    <span class="logo-text">Trip</span> <span class="logo-sub">.com</span>
                </a>
            </div>
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="destination.html">Destinations</a></li>
                    <li><a href="guides.html">Guides</a></li>
                    <li><a href="universities.html">Universities</a></li>
                    <li><a href="vehicle.html" class="active">Vehicle Rentals</a></li>
                    <li><a href="feedBack.html">FeedBack</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <!--        <button class="btn btn-outline" onclick="window.location.href= 'login.html'">Book Now</button>-->
                <button class="btn-logout" onclick="logout()">Logout</button>
                <button class="menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu">
    <div class="mobile-menu-inner">
        <div class="mobile-menu-footer">
            <div class="social-links">
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                    </svg>
                </a>
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <a href="#" class="social-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Main Content -->
<main>
    <!-- Page Header -->
    <section class="page-header" id="destinations">
        <div class="page-header-bg">
            <div class="page-header-overlay"></div>
        </div>
        <div class="container">
            <div class="page-header-content">
                <h1 class="page-title split-text">Travel Guides</h1>
                <div class="breadcrumbs">
                    <a href="home.html" class="breadcrumb-item">Home</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-item active">Guides</span>
                </div>
            </div>
        </div>
    </section>
    <!-- Meet Our Guides -->
    <section class="guides-team">
        <div class="container">
            <div id="guidesContainer" class="guides-grid">
                <!--Dynamic Guides will load here-->
            </div>
        </div>
    </section>

    <!-- Travel Tips Section -->
    <section class="travel-tips">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <h2 class="section-title">Expert Travel Tips</h2>
                <p class="section-subtitle">Insights and advice from our experienced guides</p>
            </div>
            <div class="tips-grid" id="tipsContainer">
<!--                travel tips will load here-->
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <div class="footer-logo">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                    </svg>
                    <span class="logo-text">Trip</span> <span class="logo-sub">.com</span>
                </div>
                <p class="footer-description">Creating unforgettable travel experiences since 2010. Your journey begins with us.</p>
                <div class="footer-social">
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="24" height="24" viewBox="0 0 24 24"
                             fill="none" stroke="currentColor"
                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </a>
                </div>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#destinations">Home</a></li>
                    <li><a href="home.html#packages">Packages</a></li>
                    <li><a href="home.html#testimonials">Travelers</a></li>
                    <li><a href="home.html#gallery">Gallery</a></li>
                    <li><a href="home.html#contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Support</h3>
                <ul class="footer-links">
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Booking Information</a></li>
                    <li><a href="#">Cancellation Policy</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="footer-title">Newsletter</h3>
                <p class="footer-newsletter-text">Subscribe to our newsletter for travel tips and exclusive offers</p>
                <div class="footer-newsletter">
                    <input type="email" placeholder="Enter your email">
                    <button class="btn btn-primary">Subscribe</button>
                </div>
                <p class="footer-newsletter-disclaimer">By subscribing, you agree to our Privacy Policy</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p class="copyright">Â© <span id="currentYear"></span> Wanderlust Travel. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Back to Top Button -->
<button class="back-to-top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
</button>

<!-- Scripts -->
<script src="js/index.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const GUIDES_API_URL = "http://localhost:8080/api/guides";
        const TIPS_API_URL = "http://localhost:8080/api/travelTips";

        const guidesContainer = document.getElementById("guidesContainer");
        const tipsContainer = document.getElementById("tipsContainer");

        // ===== Load Guides =====
        async function loadGuides() {
            if (!guidesContainer) return;
            try {
                const response = await fetch(GUIDES_API_URL);
                const data = await response.json();

                guidesContainer.innerHTML = ""; // clear old content

                if (response.ok && data.data && data.data.length > 0) {
                    data.data.forEach(guide => addGuideCard(guide));
                } else {
                    guidesContainer.innerHTML = `<p>No guides found.</p>`;
                }
            } catch (error) {
                console.error("Error loading guides:", error);
                guidesContainer.innerHTML = `<p style="color:red;">Failed to load guides.</p>`;
            }
        }

        // ===== Build Guide Card =====
        function addGuideCard(guide) {
            const card = document.createElement("div");
            card.classList.add("guide-card");
            card.setAttribute("data-aos", "fade-up");

            // Build social links dynamically
            let socialsHtml = "";
            if (guide.socialLinks) {
                for (const [platform, url] of Object.entries(guide.socialLinks)) {
                    socialsHtml += `
                    <a href="${url}" target="_blank" class="guide-social-link">
                        <i class="fab fa-${platform.toLowerCase()}"></i>
                    </a>`;
                }
            }

            card.innerHTML = `
            <div class="guide-image">
                <img src="${guide.imagePath || 'images/default-guide.jpg'}" alt="${guide.name}">
                <div class="guide-overlay">
                    ${socialsHtml || "<span>No Social Links</span>"}
                </div>
            </div>
            <div class="guide-content">
                <h3 class="guide-name">${guide.name}</h3>
                <p class="guide-position">${guide.position}</p>
                <div class="guide-info">
                    <div class="guide-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <span>${guide.experienceYears || 0}+ Years Experience</span>
                    </div>
                    <div class="guide-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        <span>${guide.location || "Sri Lanka"}</span>
                    </div>
                    <div class="guide-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21.5 12H16c-.7 2-2 3-4 3s-3.3-1-4-3H2.5"></path>
                            <path d="M5.5 5.1L2 12v6c0 1.1.9 2 2 2h16a2 2 0 0 0 2-2v-6l-3.4-6.9A2 2 0 0 0 16.8 4H7.2a2 2 0 0 0-1.8 1.1z"></path>
                        </svg>
                        <span>${guide.specialities || "Tours"}</span>
                    </div>
                </div>
                <p class="guide-bio">${guide.bio || ""}</p>
                <a href="#" class="btn btn-outline btn-sm">Book Now</a>
            </div>
        `;

            guidesContainer.appendChild(card);
        }

        // ===== Load Travel Tips =====
        async function loadTips() {
            if (!tipsContainer) return;
            try {
                const response = await fetch(TIPS_API_URL);
                const data = await response.json();

                tipsContainer.innerHTML = "";

                if (response.ok && data.data && data.data.length > 0) {
                    data.data.forEach(tip => addTipCard(tip));
                } else {
                    tipsContainer.innerHTML = `<p>No travel tips found.</p>`;
                }
            } catch (error) {
                console.error("Error loading tips:", error);
                tipsContainer.innerHTML = `<p style="color:red;">Failed to load travel tips.</p>`;
            }
        }

        function addTipCard(tip) {
            const card = document.createElement("div");
            card.classList.add("tip-card");
            card.setAttribute("data-aos", "fade-up");
            card.setAttribute("data-aos-delay", "200");

            card.innerHTML = `
        <div class="tip-image">
            <img src="${tip.imageUrl || 'images/default-tip.jpg'}" alt="${tip.title}">
        </div>
        <div class="tip-content">
            <div class="tip-category">${tip.category}</div>
            <h3 class="tip-title">${tip.title}</h3>
            <p class="tip-excerpt">${tip.excerpt || ""}</p>
            <a href="${tip.link || '#'}" target="_blank" class="tip-link">
                <span>Read More</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
            </a>
        </div>
    `;

            tipsContainer.appendChild(card);
        }


        // ===== Run Loader =====
        loadGuides();
        loadTips()


        // ===== Auth check (inside DOMContentLoaded) =====
        const token = getCookie("token");
        if (!token) {
            // toastr.warning("You must be logged in.", "Access Denied");
            setTimeout(() => window.location.href = "login.html", 1500);
        }
    });

    // ===== Cookie Helpers (GLOBAL scope) =====
    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i].trim();
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function deleteCookie(name) {
        document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax;";
    }

    // ===== Logout (GLOBAL so button onclick works) =====
    function logout() {
        deleteCookie("token");
        deleteCookie("username");
        // toastr.info("Logged out successfully.", "Logout");
        setTimeout(() => window.location.href = "index.html", 1500);
    }
</script>
</body>
</html>